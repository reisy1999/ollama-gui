# Ollama チャットアプリ開発ロードマップ 🚀

完全個人用・学習重視版

---

## 📋 全体像

このロードマップは「動くものを少しずつ改善」「各段階で達成感」「段階的に難易度UP」を重視して設計しています。

---

## 🎯 フェーズ1：基礎体験の構築（Week 1-2）

### 1. ストリーミング出力対応
**学べること**: SSE (Server-Sent Events)、非同期処理、UIの逐次更新
**実装内容**:
- ollama API の `/api/generate` または `/api/chat` でストリーミング有効化
- フロントエンドで `EventSource` または `fetch` でストリーム受信
- 文字が1文字ずつ（またはチャンク単位で）表示される実装

**ポイント**: 一気にチャットアプリらしくなる！まずはここで達成感を。

---

### 2. ローディング状態の表示
**学べること**: UI状態管理、ユーザーフィードバック
**実装内容**:
- 送信ボタンを押したら「入力欄を無効化」
- 「考え中...」アニメーション（点滅ドットなど）
- ストリーミング開始で状態切り替え

**ポイント**: 小さいけど体験が格段に良くなる。次のUIフェーズへの準備。

---

### 3. LINEのようなUI
**学べること**: CSS Flexbox/Grid、レスポンシブデザイン、スクロール制御
**実装内容**:
- ユーザー（右）とAI（左）の吹き出しデザイン
- 背景色の差別化、角丸、影
- 自動スクロール（最新メッセージへ）
- スクロール位置の保持（過去ログ読んでる時に新規メッセージで飛ばない工夫）

**ポイント**: 見た目が変わるとテンション上がります！

---

### 4. Markdownレンダリング
**学べること**: サードパーティライブラリの導入、XSS対策
**実装内容**:
- `marked.js` や `markdown-it` の導入
- コードブロック、リスト、見出し、太字等の対応
- `DOMPurify` でサニタイズ（安全性）

**ポイント**: コードが綺麗に表示されると実用性が跳ね上がります。

---

### 5. コードブロックのシンタックスハイライト
**学べること**: DOM操作、動的なライブラリ適用
**実装内容**:
- `highlight.js` または `prism.js` の導入
- コードブロックに言語別ハイライト
- 行番号表示（オプション）

**ポイント**: プログラミング用途なら必須級の機能。

---

## 🛠️ フェーズ2：実用性の向上（Week 3-4）

### 6. コピーボタンの実装
**学べること**: Clipboard API、要素の位置制御
**実装内容**:
- 各メッセージにコピーアイコン表示
- クリックでクリップボードにコピー
- コピー完了のフィードバック（「コピーしました！」表示）

**ポイント**: 地味だけど使用頻度が高い機能。

---

### 7. 会話のリセットボタン
**学べること**: 状態管理、確認ダイアログ
**実装内容**:
- ヘッダーに「新規会話」ボタン
- 確認ダイアログ（誤操作防止）
- 会話履歴をクリア

**ポイント**: 次の「会話履歴」実装の準備にもなります。

---

### 8. エラーハンドリング
**学べること**: エラー処理、ユーザーへの適切な通知
**実装内容**:
- ollama が起動していない場合の検知
- ネットワークエラー時の表示
- タイムアウト処理
- エラーメッセージを吹き出しで表示（「接続できませんでした」等）

**ポイント**: 本番運用を見据えた堅牢性。意外と学びが多い。

---

### 9. モデル切り替え機能
**学べること**: API の動的パラメータ変更、モデル一覧取得
**実装内容**:
- ollama の `/api/tags` でモデル一覧取得
- ドロップダウンまたはラジオボタンで選択UI
- 選択中のモデルを表示
- モデル情報の表示（パラメータ数など）

**ポイント**: モデルごとの挙動の違いを体感できて面白い！

---

### 10. 出力長制限（max_tokens指定）
**学べること**: APIパラメータの理解、トークンの概念
**実装内容**:
- スライダーまたは数値入力で `num_predict` 設定
- プリセット（短め/普通/詳しく）ボタン
- 現在の設定値を表示

**ポイント**: トークンの概念を学ぶ第一歩。

---

## 🧠 フェーズ3：会話の記憶と知性（Week 5-7）

### 11. シンプルな会話履歴（全履歴保持）
**学べること**: 配列管理、Context Window の概念
**実装内容**:
- メッセージを配列で保持
- ollama の `/api/chat` に全履歴を送信
- `messages` 形式でのやり取り

**ポイント**: ここから「会話」が成立し始めます！

---

### 12. 会話履歴の保存/読み込み
**学べること**: localStorage、JSON操作、データ永続化
**実装内容**:
- localStorage に会話を自動保存
- ページリロード時に復元
- エクスポート/インポート機能（JSON ダウンロード/アップロード）

**ポイント**: 実用的なアプリに必須。データ管理の基礎。

---

### 13. トークンカウンター表示
**学べること**: トークン計算、視覚的フィードバック
**実装内容**:
- `tiktoken` 相当のライブラリ（またはおおよその文字数計算）
- 現在の会話のトークン数表示
- モデルの context window との比較（例: 2048/4096）
- 警告表示（上限近い場合）

**ポイント**: 次の「要約」実装への橋渡し。

---

### 14. 入力長に応じた出力長調整
**学べること**: ヒューリスティックなロジック設計
**実装内容**:
- 入力文字数をカウント
- 短い質問（～50文字）→ `num_predict: 200`
- 中程度（～200文字）→ `num_predict: 500`
- 長文・コード含む → `num_predict: 1000`
- 自動/手動切り替えトグル

**ポイント**: ユーザー体験を考えたロジック設計の練習。

---

### 15. temperature等のパラメータ調整
**学べること**: LLMの挙動制御、パラメータチューニング
**実装内容**:
- `temperature`, `top_p`, `top_k` の調整UI
- プリセット（創造的/バランス/正確）
- パラメータの説明テキスト表示

**ポイント**: モデルの内部挙動を理解する良い機会。

---

## 🚀 フェーズ4：高度な機能（Week 8-10）

### 16. 複数会話の管理
**学べること**: 複雑な状態管理、UI/UX設計
**実装内容**:
- サイドバーに会話リスト
- 会話の新規作成/切り替え/削除
- 各会話にタイトル自動生成（最初の質問から）
- アクティブな会話のハイライト

**ポイント**: 実用的なアプリへの大きな一歩。

---

### 17. プリセットプロンプト
**学べること**: テンプレート管理、カスタマイズ性
**実装内容**:
- よく使うプロンプトを登録/編集/削除
- ドロップダウンまたはボタンで挿入
- デフォルトプリセット（「コードレビュー」「翻訳」「要約」等）
- プリセットにショートカットキー割り当て（オプション）

**ポイント**: 実用性が格段に上がる機能。

---

### 18. 会話履歴の要約機能
**学べること**: LLMでLLMを制御、再帰的な処理
**実装内容**:
- トークン数が閾値を超えたら自動で要約
- 古い会話を ollama に要約させる
- 要約結果を system プロンプトとして保持
- 手動要約ボタンも用意

**ポイント**: かなり高度。でもここまで来たら実装できるはず！

---

### 19. 高度な履歴管理（会話の目的保持）
**学べること**: 情報抽出、意味のある要約
**実装内容**:
- 会話開始時に「この会話の目的」を抽出
- 重要な情報（ユーザー名、プロジェクト名、前提条件等）を別途保持
- 定期的に「会話のサマリー」を更新
- システムプロンプトに文脈を注入

**実装例**:
```
System: あなたはプログラミングアシスタントです。
現在の会話の目的: Reactでチャットアプリを作成
重要な情報: ユーザーは初心者、TypeScript使用、Next.js採用予定
```

**ポイント**: 最高難度。でも実装できたら感動します！

---

### 20. 検索機能（会話内検索）
**学べること**: 全文検索、ハイライト表示
**実装内容**:
- 会話履歴内をキーワード検索
- マッチした箇所をハイライト
- 検索結果にジャンプ

**ポイント**: 長い会話で真価を発揮。

---

## 🎨 オプション機能（余裕があれば）

### 21. テーマ切り替え（ダーク/ライトモード）
**学べること**: CSS変数、テーマ管理

---

### 22. ショートカットキー
**学べること**: キーボードイベント、アクセシビリティ
- `Ctrl/Cmd + Enter` で送信
- `Ctrl/Cmd + K` で新規会話
- `Ctrl/Cmd + /` でプリセット検索

---

### 23. 音声入力/音声出力
**学べること**: Web Speech API
- マイクボタンで音声入力
- TTS で回答を読み上げ

---

### 24. 画像入力対応（multimodal）
**学べること**: ファイルアップロード、base64エンコード
- ollama の vision モデル（llava等）で画像分析
- ドラッグ&ドロップ対応

---

## 📚 各フェーズでの学習ポイント

### フェーズ1: フロントエンドの基礎
- 非同期処理、Promise、Stream API
- CSS レイアウト、アニメーション
- サードパーティライブラリの統合

### フェーズ2: 実用的なUI/UX
- エラーハンドリングのベストプラクティス
- ユーザーフィードバックの設計
- APIとの連携

### フェーズ3: データ管理と永続化
- 状態管理の設計
- ブラウザストレージ
- トークンとContext Windowの理解

### フェーズ4: 高度なアプリケーション設計
- 複雑な状態管理（複数会話）
- LLMの高度な活用（要約、抽出）
- アーキテクチャ設計

---

## 🎯 進め方のコツ

1. **小さく始める**: 各機能を1つずつ確実に
2. **動くものを常に保つ**: 壊れたら前の状態に戻せるように（Git活用）
3. **自分で使う**: 実際に使って不便な点を改善
4. **コードレビュー**: 定期的にリファクタリング
5. **楽しむ**: 詰まったら面白い機能に逃げてもOK！

---

## 📅 目安スケジュール

- **Week 1-2**: フェーズ1完了（基礎体験）
- **Week 3-4**: フェーズ2完了（実用性）
- **Week 5-7**: フェーズ3完了（会話の記憶）
- **Week 8-10**: フェーズ4完了（高度な機能）
- **Week 11+**: オプション機能、磨き込み

---

## 🎓 最後に

この順番で進めれば、
- **段階的に難易度が上がる**
- **各ステップで「動くもの」が改善される**
- **実用的なスキルが身につく**
- **最終的にプロダクトレベルのアプリになる**

焦らず、楽しみながら進めてください！
どの段階でも質問があればいつでもどうぞ 😊

頑張ってください！ 🚀